import { useState } from "react";

export const CreateStory = () => {
  const [isEditMode, setIsEditMode] = useState(false);
  const [selectedMedia, setSelectedMedia] = useState<File | null>(null);

const handleFileSelect = (files: FileList | null): void => {
    if (files && files.length > 0) {
        setSelectedMedia(files[0]);
        setIsEditMode(true);
    }
};

  return (
    <>
      {/* Upload screen (always part of normal layout flow) */}
      <div className="flex-1 bg-black text-white">
        <div className="flex items-center justify-center h-full">
          <div className="text-center w-full mx-auto p-6">
            <div
              className="bg-[#323234] rounded-lg p-16"
              onClick={() => document.getElementById("fileInput")?.click()}
            >
              <div className="flex flex-col items-center">
                <div className="bg-gray-700 rounded-full p-6 mb-4">
                  <div className="text-blue-500">
                    <svg width="73" height="59" viewBox="0 0 73 59" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M0.5 33.0544C0.5 39.9242 6.00374 45.4725 15.2613 45.4725H57.5977C66.2625 45.4725 71.4558 40.5846 71.4558 34.1905C71.4558 28.8534 68.0405 24.4672 62.5367 22.3799C62.5934 10.5958 53.5333 2.08789 41.9897 2.08789C34.3409 2.08789 28.8936 5.91907 25.5067 10.5429C19.0998 8.93116 10.9994 13.5814 10.8583 21.006C4.47961 21.9307 0.5 26.8188 0.5 33.0544ZM36.1189 59.0006C34.9054 59.0006 33.8611 58.0758 33.8611 56.9662V31.2313L34.0305 27.2944L32.4499 28.8534L28.0751 33.2129C27.68 33.6355 27.0872 33.8471 26.5228 33.8471C25.3373 33.8471 24.4906 33.0544 24.4906 31.9976C24.4906 31.4161 24.7446 30.9935 25.168 30.5971L34.4819 22.1949C35.0464 21.6665 35.5262 21.508 36.1189 21.508C36.6834 21.508 37.1632 21.6665 37.7279 22.1949L47.0417 30.5971C47.4651 30.9935 47.7192 31.4161 47.7192 31.9976C47.7192 33.0544 46.816 33.8471 45.6588 33.8471C45.0943 33.8471 44.5299 33.6355 44.1065 33.2129L39.76 28.8534L38.1793 27.2944L38.3487 31.2313V56.9662C38.3487 58.0758 37.3325 59.0006 36.1189 59.0006Z" fill="#007AFF"/>
                    </svg>
                  </div>
                </div>
                <h2 className="text-xl font-bold mb-2">Upload your Content</h2>
                <p className="text-gray-400 mb-6">
                  Drag your photos and videos with your followers
                </p>
                <button className="bg-blue-600 text-white px-4 py-2 rounded-md flex items-center">
                  <span className="mr-2">+</span> Select Files
                </button>
                <input
                  id="fileInput"
                  type="file"
                  accept="image/*,video/*"
                  className="hidden"
                  onChange={(e) => handleFileSelect(e.target.files)}
                />
              </div>
            </div>
          </div>
        </div>
      </div>

      {/* Full-screen overlay for edit mode */}
      {isEditMode && (
        <div className="fixed inset-0 z-50 bg-black">
          <div className="flex justify-between p-4">
            <button
              onClick={() => setIsEditMode(false)}
              className="bg-transparent border border-white/20 text-white px-4 py-2 rounded-md"
            >
              Reset
            </button>
            <div className="flex gap-2">
              <button className="bg-blue-600 text-white px-4 py-2 rounded-md">
                Preview
              </button>
              <button
                onClick={() => setIsEditMode(false)}
                className="text-white"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  className="h-6 w-6"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                >
                  <path
                    strokeLinecap="round"
                    strokeLinejoin="round"
                    strokeWidth={2}
                    d="M6 18L18 6M6 6l12 12"
                  />
                </svg>
              </button>
            </div>
          </div>

          <div className="flex h-[calc(100vh-80px)]">
            <div className="w-20 bg-black border-r border-white/10 flex flex-col items-center py-6 justify-between h-full">
              {/* Your editing tools */}
              <button className="text-white">
                <span className="block h-6 w-6">
                  <svg
                    width="40"
                    height="40"
                    viewBox="0 0 43 46"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M30.7175 8.15112V5.87957H31.2541C36.0614 5.87957 39.0874 8.78413 39.0874 12.8804C39.0874 15.3568 38.2076 16.2877 38.1646 16.9767C38.1216 17.4794 38.3578 17.7959 38.8299 18.0007C39.4952 18.2799 40.2891 18.0193 40.6539 17.4794C41.3194 16.4926 41.7699 14.8541 41.7699 12.8618C41.7699 7.40634 37.5851 3.73831 31.2755 3.73831H30.7175V1.29916C30.7175 0.0330816 29.3655 -0.357914 28.1851 0.349664L22.3476 3.77552C21.5964 4.22241 21.575 5.22788 22.3476 5.67477L28.1851 9.0821C29.344 9.771 30.7175 9.38 30.7175 8.15112ZM16.3814 31.7232H28.85V39.7666C28.85 40.679 28.8698 41.619 29.9 41.619C30.9515 41.619 31.6833 41.312 31.6833 39.7666V31.7232H40.8258C41.813 31.7232 42.5 31.5232 42.5 30.6667C42.5 29.8289 41.813 29.5714 40.8258 29.5714H31.6833V18.8199C31.6833 15.785 30.2453 14.5375 26.7471 14.5375H14.15V6.60566C14.15 5.69337 13.7856 4.92857 12.7555 4.92857C11.7253 4.92857 11.4452 5.69337 11.4452 6.60566V14.5375H2.19549C1.18673 14.5375 0.5 15.0961 0.5 15.9526C0.5 16.7905 1.18673 17.3491 2.19549 17.3491H11.4452V27.4407C11.4452 30.4756 12.8832 31.7232 16.3814 31.7232ZM16.775 29.5714C15.2727 29.5714 14.15 28.6843 14.15 27.381V17.3491H26.2106C27.7129 17.3491 29.0499 17.5166 29.0499 18.8199V29.5714H16.775ZM12.4326 37.8489V40.3625H11.8745C7.08868 40.3625 4.04117 37.4579 4.04117 33.3617C4.04117 30.8853 4.92108 29.9543 4.9854 29.284C5.00685 28.7627 4.79233 28.4461 4.29867 28.2414C3.63338 27.9621 2.86078 28.2227 2.47443 28.7627C1.83058 29.7495 1.35847 31.388 1.35847 33.3803C1.35847 38.8357 5.54339 42.5037 11.853 42.5037H12.4326V44.7008C12.4326 45.9669 13.7631 46.3579 14.965 45.6503L20.781 42.2244C21.5536 41.7775 21.5536 40.7721 20.781 40.3252L14.965 36.9179C13.7846 36.229 12.4326 36.62 12.4326 37.8489Z"
                      fill="#8E8E93"
                    />
                  </svg>
                </span>
              </button>
              <button className="text-white">
                <span className="block h-6 w-6">
                  <svg
                    width="40"
                    height="40"
                    viewBox="0 0 53 47"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M5.48438 23.4913C5.48438 31.8622 13.3784 36.5673 23.2358 36.5673C24.1574 36.5673 25.0991 36.5309 26.0208 36.4579L25.3195 33.7771C24.6784 33.8135 24.0573 33.8318 23.4362 33.8318C15.2817 33.8318 8.50973 30.4031 8.50973 23.5094C8.50973 15.558 18.5275 9.97746 28.1246 9.97746C36.5194 9.97746 43.7521 14.7191 43.7521 21.9228C43.7521 28.5612 35.8982 34.2513 28.4651 34.2513C27.0425 34.2513 26.0007 33.7405 26.0007 32.8652C26.0007 31.3333 28.3248 30.312 31.2299 30.312C34.676 30.312 37.3007 32.6099 37.3007 35.7649C37.3007 37.9534 35.9384 40.0872 33.7144 41.3819C33.1334 41.7649 32.6925 42.148 32.6925 42.8046C32.6925 43.4793 33.2936 44.0629 34.2553 44.0629C34.676 44.0629 34.9366 43.9534 35.3373 43.7346C38.4026 41.9108 40.326 38.8653 40.326 35.7101C40.326 31.0414 36.2189 27.5399 31.0096 27.5399C26.4014 27.5399 22.9553 29.7284 22.9553 32.9563C22.9553 35.4001 25.1793 36.9868 28.4651 36.9868C37.521 36.9868 46.7776 30.1478 46.7776 21.9411C46.7776 13.2602 38.2625 7.22363 28.1045 7.22363C16.9847 7.22363 5.48438 13.862 5.48438 23.4913Z"
                      fill="#8E8E93"
                    />
                  </svg>
                </span>
              </button>
              <button className="text-white">
                <span className="block h-6 w-6">
                  <svg
                   width="40"
                    height="40"
                    viewBox="0 0 45 44"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M22.4983 26.9183C29.3103 26.9183 34.8325 21.3402 34.8325 14.4592C34.8325 7.57815 29.3103 2 22.4983 2C15.6863 2 10.1641 7.57815 10.1641 14.4592C10.1641 21.3402 15.6863 26.9183 22.4983 26.9183Z"
                      stroke="#8E8E93"
                      strokeWidth="2.5"
                      strokeLinejoin="round"
                    />
                    <path
                      d="M31.5009 42.0003C38.1288 42.0003 43.5017 36.4222 43.5017 29.5412C43.5017 22.6602 38.1288 17.082 31.5009 17.082C24.873 17.082 19.5 22.6602 19.5 29.5412C19.5 36.4222 24.873 42.0003 31.5009 42.0003Z"
                      stroke="#8E8E93"
                      strokeWidth="2.5"
                      strokeLinejoin="round"
                    />
                    <path
                      d="M13.5009 42.0003C20.1288 42.0003 25.5017 36.4222 25.5017 29.5412C25.5017 22.6602 20.1288 17.082 13.5009 17.082C6.87297 17.082 1.5 22.6602 1.5 29.5412C1.5 36.4222 6.87297 42.0003 13.5009 42.0003Z"
                      stroke="#8E8E93"
                      strokeWidth="2.5"
                      strokeLinejoin="round"
                    />
                  </svg>
                </span>
              </button>
              <button className="text-white">
                <span className="block h-6 w-6">
                  <svg
                    width="40"
                    height="40"
                    viewBox="0 0 37 26"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M28.0392 25.9647C30.4857 25.9647 32.7735 24.4881 33.7585 22.2028H33.8219V24.5232C33.8219 25.4022 34.362 25.9824 35.1087 25.9824C35.8714 25.9824 36.4115 25.4022 36.4115 24.453V12.7099C36.4115 8.87762 33.8696 6.4165 29.8343 6.4165C26.8477 6.4165 24.3535 7.8756 23.448 10.1433C23.2731 10.5652 23.1461 10.9872 23.1461 11.3739C23.1461 12.1474 23.6704 12.6572 24.3535 12.6572C24.8459 12.6572 25.2272 12.4462 25.4656 11.954C26.3553 9.9148 27.7055 8.94794 29.7709 8.94794C32.2491 8.94794 33.7266 10.4949 33.7266 12.9561V14.4679L28.5952 14.7843C24.5759 15.0304 22.3359 17.0872 22.3359 20.357C22.3359 23.7146 24.6712 25.9647 28.0392 25.9647ZM28.6905 23.5212C26.5459 23.5212 25.0842 22.2205 25.0842 20.2866C25.0842 18.4233 26.4346 17.1751 28.9289 16.9993L33.7266 16.6653V18.5288C33.7266 21.3238 31.4867 23.5212 28.6905 23.5212Z"
                      fill="#8E8E93"
                    />
                    <path
                      d="M1.33448 25.9647C2.17647 25.9647 2.58953 25.6132 2.89137 24.6287L4.94076 18.4233H14.3139L16.3633 24.6287C16.6651 25.6132 17.0781 25.9647 17.9044 25.9647C18.7462 25.9647 19.2865 25.4022 19.2865 24.5232C19.2865 24.2243 19.2388 23.9432 19.1116 23.574L11.6608 1.61731C11.2954 0.54496 10.6441 0 9.62733 0C8.64235 0 7.9751 0.527382 7.6256 1.59973L0.174754 23.5916C0.0476601 23.9606 0 24.242 0 24.5408C0 25.4198 0.508374 25.9647 1.33448 25.9647ZM5.71919 15.7511L9.57966 3.9202H9.6591L13.5196 15.7511H5.71919Z"
                      fill="#8E8E93"
                    />
                  </svg>
                </span>
              </button>
              <button className="text-white">
                <span className="block h-6 w-6">
                  <svg
                    width="40"
                    height="40"
                    viewBox="0 0 21 34"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M19.9113 8.28934V2.06842C19.9113 1.19154 19.227 0.629016 18.4157 0.794465L10.2375 2.6475C9.21916 2.87913 8.66229 3.45821 8.66229 4.38472L8.69411 22.7828C8.77365 23.5935 8.40772 24.1229 7.70763 24.2718L5.17779 24.8177C1.99562 25.5127 0.5 27.2003 0.5 29.6986C0.5 32.2299 2.37748 34.0003 5.0187 34.0003C7.35758 34.0003 10.858 32.2134 10.858 27.3988V12.2601C10.858 11.3833 11.0171 11.2013 11.7649 11.0358L19.0363 9.38131C19.5772 9.26549 19.9113 8.83532 19.9113 8.28934Z"
                      fill="#8E8E93"
                    />
                  </svg>
                </span>
              </button>
              <button className="text-white">
                <span className="block h-6 w-6">
                  <svg
                    width="40"
                    height="40"
                    viewBox="0 0 43 40"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M16.25 26.6665C17.7382 27.717 19.5481 28.3332 21.5 28.3332C23.4519 28.3332 25.2618 27.717 26.75 26.6665"
                      stroke="#8E8E93"
                      strokeWidth="2.5"
                      strokeLinecap="round"
                    />
                    <path
                      d="M26.75 20C27.7165 20 28.5 18.8807 28.5 17.5C28.5 16.1193 27.7165 15 26.75 15C25.7835 15 25 16.1193 25 17.5C25 18.8807 25.7835 20 26.75 20Z"
                      fill="#8E8E93"
                    />
                    <path
                      d="M16.25 20C17.2165 20 18 18.8807 18 17.5C18 16.1193 17.2165 15 16.25 15C15.2835 15 14.5 16.1193 14.5 17.5C14.5 18.8807 15.2835 20 16.25 20Z"
                      fill="#8E8E93"
                    />
                    <path
                      d="M26.75 36.6668H21.5C13.2504 36.6668 9.12563 36.6668 6.56282 34.226C4 31.7853 4 27.8568 4 20.0002C4 12.1434 4 8.21505 6.56282 5.77428C9.12563 3.3335 13.2504 3.3335 21.5 3.3335C29.7495 3.3335 33.8744 3.3335 36.4371 5.77428C39 8.21505 39 12.1434 39 20.0002V25.0002M26.75 36.6668C33.5155 36.6668 39 31.4435 39 25.0002M26.75 36.6668C26.75 33.5647 26.75 32.0137 27.1782 30.7583C28.0438 28.2213 30.1322 26.2323 32.7961 25.408C34.1142 25.0002 35.7427 25.0002 39 25.0002"
                      stroke="#8E8E93"
                      strokeWidth="2.5"
                    />
                  </svg>
                </span>
              </button>
            </div>

            <div className="flex-1 flex justify-center items-center p-4">
              {selectedMedia && (
                <div className="relative max-w-md rounded-lg overflow-hidden">
                  <img
                    src={URL.createObjectURL(selectedMedia)}
                    alt="Preview"
                    className="w-full object-cover"
                  />
                  <div className="absolute top-4 left-4 bg-black/50 text-white px-2 py-1 rounded-full text-sm flex items-center">
                    <span className="mr-1">🔊</span> Add Sound
                  </div>
                </div>
              )}
            </div>
          </div>
        </div>
      )}
    </>
  );
};
